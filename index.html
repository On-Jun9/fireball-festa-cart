<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>[파볼페스타] 2025 공동구매 장바구니</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1><a href="https://fireball-cart.pages.dev" style="color: inherit; text-decoration: none; cursor: pointer;">[파볼페스타] 2025 공동구매 장바구니</a></h1>
  <div class="wrap">
    <!-- 탭 네비게이션 -->
    <div class="tabs" aria-label="섹션 전환">
      <button id="tabSelect" class="tab active" type="button">상품 리스트</button>
      <button id="tabCart" class="tab" type="button">내 장바구니</button>
      <button id="tabSummary" class="tab" type="button">요약</button>
    </div>
    <!-- 상품 선택 박스 (접기/펼치기 가능) -->
    <details id="selectSection" open class="card selector">
      <summary style="cursor:pointer; font-weight:600; font-size:16px; margin-bottom:8px;">상품 선택 (카페 <span id="pdfCount">0</span>개 · 수동 <span id="manualCount">0</span>개 · 총 <span id="totalCount">0</span>개)</summary>
      <div class="row filters" style="justify-content: space-between; margin-bottom: 10px; gap: 8px;">
        <input id="q" type="search" placeholder="상품 검색: 상품명, 브랜드, 용량…" style="flex:1;" />
        <select id="brand">
          <option value="">브랜드</option>
          <option>파이어볼</option>
          <option>바인더</option>
          <option>고체왁스</option>
          <option>향장품</option>
          <option>세차용품</option>
          <option>-</option>
        </select>
        <select id="size">
          <option value="">용량</option>
          <option>100ml</option>
          <option>200ml</option>
          <option>250ml</option>
          <option>400ml</option>
          <option>500ml</option>
          <option>1L</option>
          <option>4L</option>
          <option>-</option>
        </select>
        <button class="btn" id="toggleManual" type="button" style="white-space: nowrap;">+ 수동</button>
      </div>

      <!-- 수동 추가 (버튼 토글, 기본 감춤) -->
      <div id="manualPanel" style="display:none;">
        <div class="manual-row" style="margin:8px 0 8px;">
          <select id="mBrand">
            <option>-</option>
            <!-- populateBrands()가 실행되며 실제 브랜드 목록으로 대체됩니다 -->
          </select>
          <input id="mName" type="text" placeholder="상품명" />
          <input id="mSize" type="text" placeholder="용량(- 가능)" />
          <input id="mMsrp" type="number" placeholder="소비자가(원)" min="0" />
          <input id="mDiscount" type="number" placeholder="할인율(%)" min="0" max="100" />
          <input id="mPrice" type="number" placeholder="공구가(자동 계산)" min="0" />
          <button class="btn" id="mAdd">수동추가</button>
        </div>
        <div class="hint" style="margin-top:6px;">* 할인율을 입력하면 공구가가 자동 계산됩니다. 공구가를 직접 입력하면 그 값을 우선합니다.</div>
      </div>

      <div class="scroll" style="margin-top:8px;">
        <table id="productTable">
          <thead>
            <tr>
              <th>브랜드</th>
              <th class="name">상품명</th>
              <th class="center sizeCol">용량</th>
              <th class="right">소비자가</th>
              <th class="center">할인율</th>
              <th class="right priceCol">공구가</th>
              <th class="center actCol">추가</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <p class="small muted" style="margin-top:8px;">※ 데이터는 파이어볼 공식 카페(2025 공동구매 리스트)에서 발췌하였습니다.</p>
      <div style="text-align:center; margin-top:16px; padding-top:12px; border-top:1px solid #e5e7eb; font-size:12px; color:#9ca3af;">
        파이어볼 공식 카페 2025 공동구매 리스트<br>
        fireball-cart.pages.dev<br>
        세차갤 - times9517
      </div>
    </details>

    <!-- 장바구니 -->
    <aside id="cartSection" class="card">
      <div style="display:flex; align-items:center; gap:8px; margin-bottom:10px;">
        <h2 style="font-size:18px; margin:0; flex:1;">내 장바구니</h2>
        <label class="mobile-check-all" style="display:none; align-items:center; gap:4px; font-size:13px; color:#6b7280; cursor:pointer;">
          <input type="checkbox" id="checkAllMobile" checked style="width:18px; height:18px; cursor:pointer;">
          <span>전체</span>
        </label>
      </div>
      <div class="scroll">
        <table id="cartTable">
          <thead>
            <tr>
              <th class="center checkCol"><input type="checkbox" id="checkAll" checked></th>
              <th class="brandCol">브랜드</th>
              <th>상품명</th>
              <th class="center sizeCol">용량</th>
              <th class="right priceCol">공구가</th>
              <th class="center qtyCol">개수</th>
              <th class="right">소계</th>
              <th class="center actCol">삭제</th>
            </tr>
          </thead>
          <tbody></tbody>
          <tfoot>
            <tr>
              <td colspan="6" class="right">선택 합계</td>
              <td class="right" id="grandTotal">0원</td>
              <td></td>
            </tr>
          </tfoot>
        </table>
      </div>
      <div class="row" style="margin-top:10px; justify-content: space-between;">
        <button class="btn" id="clearCart">장바구니 비우기</button>
        <span class="small muted" id="countInfo"></span>
      </div>
      <div style="text-align:center; margin-top:16px; padding-top:12px; border-top:1px solid #e5e7eb; font-size:12px; color:#9ca3af;">
        파이어볼 공식 카페 2025 공동구매 리스트<br>
        fireball-cart.pages.dev<br>
        세차갤 - times9517
      </div>
    </aside>

    <!-- 요약 섹션 -->
    <div id="summarySection" class="card mobile-hide">
      <div id="summaryContent"></div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
